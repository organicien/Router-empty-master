{"ast":null,"code":"/**\n * @license\n * Copyright 2020 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Priorities for the announce function\n */\nexport var AnnouncerPriority;\n\n(function (AnnouncerPriority) {\n  AnnouncerPriority[\"POLITE\"] = \"polite\";\n  AnnouncerPriority[\"ASSERTIVE\"] = \"assertive\";\n})(AnnouncerPriority || (AnnouncerPriority = {}));\n/**\n * Announces the given message with optional priority, defaulting to \"polite\"\n */\n\n\nexport function announce(message, priority) {\n  Announcer.getInstance().say(message, priority);\n}\n\nvar Announcer =\n/** @class */\nfunction () {\n  // Constructor made private to ensure only the singleton is used\n  function Announcer() {\n    this.liveRegions = new Map();\n  }\n\n  Announcer.getInstance = function () {\n    if (!Announcer.instance) {\n      Announcer.instance = new Announcer();\n    }\n\n    return Announcer.instance;\n  };\n\n  Announcer.prototype.say = function (message, priority) {\n    if (priority === void 0) {\n      priority = AnnouncerPriority.POLITE;\n    }\n\n    var liveRegion = this.getLiveRegion(priority); // Reset the region to pick up the message, even if the message is the\n    // exact same as before.\n\n    liveRegion.textContent = ''; // Timeout is necessary for screen readers like NVDA and VoiceOver.\n\n    setTimeout(function () {\n      liveRegion.textContent = message;\n      document.addEventListener('click', clearLiveRegion);\n    }, 1);\n\n    function clearLiveRegion() {\n      liveRegion.textContent = '';\n      document.removeEventListener('click', clearLiveRegion);\n    }\n  };\n\n  Announcer.prototype.getLiveRegion = function (priority) {\n    var existingLiveRegion = this.liveRegions.get(priority);\n\n    if (existingLiveRegion && document.body.contains(existingLiveRegion)) {\n      return existingLiveRegion;\n    }\n\n    var liveRegion = this.createLiveRegion(priority);\n    this.liveRegions.set(priority, liveRegion);\n    return liveRegion;\n  };\n\n  Announcer.prototype.createLiveRegion = function (priority) {\n    var el = document.createElement('div');\n    el.style.position = 'absolute';\n    el.style.top = '-9999px';\n    el.style.left = '-9999px';\n    el.style.height = '1px';\n    el.style.overflow = 'hidden';\n    el.setAttribute('aria-atomic', 'true');\n    el.setAttribute('aria-live', priority);\n    document.body.appendChild(el);\n    return el;\n  };\n\n  return Announcer;\n}();","map":{"version":3,"sources":["announce.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2020 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * Priorities for the announce function\n */\nexport var AnnouncerPriority;\n(function (AnnouncerPriority) {\n    AnnouncerPriority[\"POLITE\"] = \"polite\";\n    AnnouncerPriority[\"ASSERTIVE\"] = \"assertive\";\n})(AnnouncerPriority || (AnnouncerPriority = {}));\n/**\n * Announces the given message with optional priority, defaulting to \"polite\"\n */\nexport function announce(message, priority) {\n    Announcer.getInstance().say(message, priority);\n}\nvar Announcer = /** @class */ (function () {\n    // Constructor made private to ensure only the singleton is used\n    function Announcer() {\n        this.liveRegions = new Map();\n    }\n    Announcer.getInstance = function () {\n        if (!Announcer.instance) {\n            Announcer.instance = new Announcer();\n        }\n        return Announcer.instance;\n    };\n    Announcer.prototype.say = function (message, priority) {\n        if (priority === void 0) { priority = AnnouncerPriority.POLITE; }\n        var liveRegion = this.getLiveRegion(priority);\n        // Reset the region to pick up the message, even if the message is the\n        // exact same as before.\n        liveRegion.textContent = '';\n        // Timeout is necessary for screen readers like NVDA and VoiceOver.\n        setTimeout(function () {\n            liveRegion.textContent = message;\n            document.addEventListener('click', clearLiveRegion);\n        }, 1);\n        function clearLiveRegion() {\n            liveRegion.textContent = '';\n            document.removeEventListener('click', clearLiveRegion);\n        }\n    };\n    Announcer.prototype.getLiveRegion = function (priority) {\n        var existingLiveRegion = this.liveRegions.get(priority);\n        if (existingLiveRegion &&\n            document.body.contains(existingLiveRegion)) {\n            return existingLiveRegion;\n        }\n        var liveRegion = this.createLiveRegion(priority);\n        this.liveRegions.set(priority, liveRegion);\n        return liveRegion;\n    };\n    Announcer.prototype.createLiveRegion = function (priority) {\n        var el = document.createElement('div');\n        el.style.position = 'absolute';\n        el.style.top = '-9999px';\n        el.style.left = '-9999px';\n        el.style.height = '1px';\n        el.style.overflow = 'hidden';\n        el.setAttribute('aria-atomic', 'true');\n        el.setAttribute('aria-live', priority);\n        document.body.appendChild(el);\n        return el;\n    };\n    return Announcer;\n}());\n//# sourceMappingURL=announce.js.map"]},"metadata":{},"sourceType":"module"}