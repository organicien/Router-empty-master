{"ast":null,"code":"/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { ALWAYS_FLOAT_TYPES, cssClasses, numbers, strings, VALIDATION_ATTR_WHITELIST } from './constants';\nvar POINTERDOWN_EVENTS = ['mousedown', 'touchstart'];\nvar INTERACTION_EVENTS = ['click', 'keydown'];\n\nvar MDCTextFieldFoundation =\n/** @class */\nfunction (_super) {\n  __extends(MDCTextFieldFoundation, _super);\n  /**\n   * @param adapter\n   * @param foundationMap Map from subcomponent names to their subfoundations.\n   */\n\n\n  function MDCTextFieldFoundation(adapter, foundationMap) {\n    if (foundationMap === void 0) {\n      foundationMap = {};\n    }\n\n    var _this = _super.call(this, __assign(__assign({}, MDCTextFieldFoundation.defaultAdapter), adapter)) || this;\n\n    _this.isFocused_ = false;\n    _this.receivedUserInput_ = false;\n    _this.isValid_ = true;\n    _this.useNativeValidation_ = true;\n    _this.helperText_ = foundationMap.helperText;\n    _this.characterCounter_ = foundationMap.characterCounter;\n    _this.leadingIcon_ = foundationMap.leadingIcon;\n    _this.trailingIcon_ = foundationMap.trailingIcon;\n\n    _this.inputFocusHandler_ = function () {\n      return _this.activateFocus();\n    };\n\n    _this.inputBlurHandler_ = function () {\n      return _this.deactivateFocus();\n    };\n\n    _this.inputInputHandler_ = function () {\n      return _this.handleInput();\n    };\n\n    _this.setPointerXOffset_ = function (evt) {\n      return _this.setTransformOrigin(evt);\n    };\n\n    _this.textFieldInteractionHandler_ = function () {\n      return _this.handleTextFieldInteraction();\n    };\n\n    _this.validationAttributeChangeHandler_ = function (attributesList) {\n      return _this.handleValidationAttributeChange(attributesList);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(MDCTextFieldFoundation, \"cssClasses\", {\n    get: function () {\n      return cssClasses;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation, \"strings\", {\n    get: function () {\n      return strings;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation, \"numbers\", {\n    get: function () {\n      return numbers;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldAlwaysFloat_\", {\n    get: function () {\n      var type = this.getNativeInput_().type;\n      return ALWAYS_FLOAT_TYPES.indexOf(type) >= 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldFloat\", {\n    get: function () {\n      return this.shouldAlwaysFloat_ || this.isFocused_ || !!this.getValue() || this.isBadInput_();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldShake\", {\n    get: function () {\n      return !this.isFocused_ && !this.isValid() && !!this.getValue();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCTextFieldFoundation, \"defaultAdapter\", {\n    /**\n     * See {@link MDCTextFieldAdapter} for typing information on parameters and return types.\n     */\n    get: function () {\n      // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n      return {\n        addClass: function () {\n          return undefined;\n        },\n        removeClass: function () {\n          return undefined;\n        },\n        hasClass: function () {\n          return true;\n        },\n        registerTextFieldInteractionHandler: function () {\n          return undefined;\n        },\n        deregisterTextFieldInteractionHandler: function () {\n          return undefined;\n        },\n        registerInputInteractionHandler: function () {\n          return undefined;\n        },\n        deregisterInputInteractionHandler: function () {\n          return undefined;\n        },\n        registerValidationAttributeChangeHandler: function () {\n          return new MutationObserver(function () {\n            return undefined;\n          });\n        },\n        deregisterValidationAttributeChangeHandler: function () {\n          return undefined;\n        },\n        getNativeInput: function () {\n          return null;\n        },\n        isFocused: function () {\n          return false;\n        },\n        activateLineRipple: function () {\n          return undefined;\n        },\n        deactivateLineRipple: function () {\n          return undefined;\n        },\n        setLineRippleTransformOrigin: function () {\n          return undefined;\n        },\n        shakeLabel: function () {\n          return undefined;\n        },\n        floatLabel: function () {\n          return undefined;\n        },\n        setLabelRequired: function () {\n          return undefined;\n        },\n        hasLabel: function () {\n          return false;\n        },\n        getLabelWidth: function () {\n          return 0;\n        },\n        hasOutline: function () {\n          return false;\n        },\n        notchOutline: function () {\n          return undefined;\n        },\n        closeOutline: function () {\n          return undefined;\n        }\n      }; // tslint:enable:object-literal-sort-keys\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MDCTextFieldFoundation.prototype.init = function () {\n    var _this = this;\n\n    if (this.adapter.hasLabel() && this.getNativeInput_().required) {\n      this.adapter.setLabelRequired(true);\n    }\n\n    if (this.adapter.isFocused()) {\n      this.inputFocusHandler_();\n    } else if (this.adapter.hasLabel() && this.shouldFloat) {\n      this.notchOutline(true);\n      this.adapter.floatLabel(true);\n      this.styleFloating_(true);\n    }\n\n    this.adapter.registerInputInteractionHandler('focus', this.inputFocusHandler_);\n    this.adapter.registerInputInteractionHandler('blur', this.inputBlurHandler_);\n    this.adapter.registerInputInteractionHandler('input', this.inputInputHandler_);\n    POINTERDOWN_EVENTS.forEach(function (evtType) {\n      _this.adapter.registerInputInteractionHandler(evtType, _this.setPointerXOffset_);\n    });\n    INTERACTION_EVENTS.forEach(function (evtType) {\n      _this.adapter.registerTextFieldInteractionHandler(evtType, _this.textFieldInteractionHandler_);\n    });\n    this.validationObserver_ = this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_);\n    this.setCharacterCounter_(this.getValue().length);\n  };\n\n  MDCTextFieldFoundation.prototype.destroy = function () {\n    var _this = this;\n\n    this.adapter.deregisterInputInteractionHandler('focus', this.inputFocusHandler_);\n    this.adapter.deregisterInputInteractionHandler('blur', this.inputBlurHandler_);\n    this.adapter.deregisterInputInteractionHandler('input', this.inputInputHandler_);\n    POINTERDOWN_EVENTS.forEach(function (evtType) {\n      _this.adapter.deregisterInputInteractionHandler(evtType, _this.setPointerXOffset_);\n    });\n    INTERACTION_EVENTS.forEach(function (evtType) {\n      _this.adapter.deregisterTextFieldInteractionHandler(evtType, _this.textFieldInteractionHandler_);\n    });\n    this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_);\n  };\n  /**\n   * Handles user interactions with the Text Field.\n   */\n\n\n  MDCTextFieldFoundation.prototype.handleTextFieldInteraction = function () {\n    var nativeInput = this.adapter.getNativeInput();\n\n    if (nativeInput && nativeInput.disabled) {\n      return;\n    }\n\n    this.receivedUserInput_ = true;\n  };\n  /**\n   * Handles validation attribute changes\n   */\n\n\n  MDCTextFieldFoundation.prototype.handleValidationAttributeChange = function (attributesList) {\n    var _this = this;\n\n    attributesList.some(function (attributeName) {\n      if (VALIDATION_ATTR_WHITELIST.indexOf(attributeName) > -1) {\n        _this.styleValidity_(true);\n\n        _this.adapter.setLabelRequired(_this.getNativeInput_().required);\n\n        return true;\n      }\n\n      return false;\n    });\n\n    if (attributesList.indexOf('maxlength') > -1) {\n      this.setCharacterCounter_(this.getValue().length);\n    }\n  };\n  /**\n   * Opens/closes the notched outline.\n   */\n\n\n  MDCTextFieldFoundation.prototype.notchOutline = function (openNotch) {\n    if (!this.adapter.hasOutline()) {\n      return;\n    }\n\n    if (openNotch) {\n      var labelWidth = this.adapter.getLabelWidth() * numbers.LABEL_SCALE;\n      this.adapter.notchOutline(labelWidth);\n    } else {\n      this.adapter.closeOutline();\n    }\n  };\n  /**\n   * Activates the text field focus state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.activateFocus = function () {\n    this.isFocused_ = true;\n    this.styleFocused_(this.isFocused_);\n    this.adapter.activateLineRipple();\n\n    if (this.adapter.hasLabel()) {\n      this.notchOutline(this.shouldFloat);\n      this.adapter.floatLabel(this.shouldFloat);\n      this.styleFloating_(this.shouldFloat);\n      this.adapter.shakeLabel(this.shouldShake);\n    }\n\n    if (this.helperText_) {\n      this.helperText_.showToScreenReader();\n    }\n  };\n  /**\n   * Sets the line ripple's transform origin, so that the line ripple activate\n   * animation will animate out from the user's click location.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setTransformOrigin = function (evt) {\n    if (this.isDisabled() || this.adapter.hasOutline()) {\n      return;\n    }\n\n    var touches = evt.touches;\n    var targetEvent = touches ? touches[0] : evt;\n    var targetClientRect = targetEvent.target.getBoundingClientRect();\n    var normalizedX = targetEvent.clientX - targetClientRect.left;\n    this.adapter.setLineRippleTransformOrigin(normalizedX);\n  };\n  /**\n   * Handles input change of text input and text area.\n   */\n\n\n  MDCTextFieldFoundation.prototype.handleInput = function () {\n    this.autoCompleteFocus();\n    this.setCharacterCounter_(this.getValue().length);\n  };\n  /**\n   * Activates the Text Field's focus state in cases when the input value\n   * changes without user input (e.g. programmatically).\n   */\n\n\n  MDCTextFieldFoundation.prototype.autoCompleteFocus = function () {\n    if (!this.receivedUserInput_) {\n      this.activateFocus();\n    }\n  };\n  /**\n   * Deactivates the Text Field's focus state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.deactivateFocus = function () {\n    this.isFocused_ = false;\n    this.adapter.deactivateLineRipple();\n    var isValid = this.isValid();\n    this.styleValidity_(isValid);\n    this.styleFocused_(this.isFocused_);\n\n    if (this.adapter.hasLabel()) {\n      this.notchOutline(this.shouldFloat);\n      this.adapter.floatLabel(this.shouldFloat);\n      this.styleFloating_(this.shouldFloat);\n      this.adapter.shakeLabel(this.shouldShake);\n    }\n\n    if (!this.shouldFloat) {\n      this.receivedUserInput_ = false;\n    }\n  };\n\n  MDCTextFieldFoundation.prototype.getValue = function () {\n    return this.getNativeInput_().value;\n  };\n  /**\n   * @param value The value to set on the input Element.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setValue = function (value) {\n    // Prevent Safari from moving the caret to the end of the input when the value has not changed.\n    if (this.getValue() !== value) {\n      this.getNativeInput_().value = value;\n    }\n\n    this.setCharacterCounter_(value.length);\n    var isValid = this.isValid();\n    this.styleValidity_(isValid);\n\n    if (this.adapter.hasLabel()) {\n      this.notchOutline(this.shouldFloat);\n      this.adapter.floatLabel(this.shouldFloat);\n      this.styleFloating_(this.shouldFloat);\n      this.adapter.shakeLabel(this.shouldShake);\n    }\n  };\n  /**\n   * @return The custom validity state, if set; otherwise, the result of a native validity check.\n   */\n\n\n  MDCTextFieldFoundation.prototype.isValid = function () {\n    return this.useNativeValidation_ ? this.isNativeInputValid_() : this.isValid_;\n  };\n  /**\n   * @param isValid Sets the custom validity state of the Text Field.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setValid = function (isValid) {\n    this.isValid_ = isValid;\n    this.styleValidity_(isValid);\n    var shouldShake = !isValid && !this.isFocused_ && !!this.getValue();\n\n    if (this.adapter.hasLabel()) {\n      this.adapter.shakeLabel(shouldShake);\n    }\n  };\n  /**\n   * Enables or disables the use of native validation. Use this for custom validation.\n   * @param useNativeValidation Set this to false to ignore native input validation.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setUseNativeValidation = function (useNativeValidation) {\n    this.useNativeValidation_ = useNativeValidation;\n  };\n\n  MDCTextFieldFoundation.prototype.isDisabled = function () {\n    return this.getNativeInput_().disabled;\n  };\n  /**\n   * @param disabled Sets the text-field disabled or enabled.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setDisabled = function (disabled) {\n    this.getNativeInput_().disabled = disabled;\n    this.styleDisabled_(disabled);\n  };\n  /**\n   * @param content Sets the content of the helper text.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setHelperTextContent = function (content) {\n    if (this.helperText_) {\n      this.helperText_.setContent(content);\n    }\n  };\n  /**\n   * Sets the aria label of the leading icon.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setLeadingIconAriaLabel = function (label) {\n    if (this.leadingIcon_) {\n      this.leadingIcon_.setAriaLabel(label);\n    }\n  };\n  /**\n   * Sets the text content of the leading icon.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setLeadingIconContent = function (content) {\n    if (this.leadingIcon_) {\n      this.leadingIcon_.setContent(content);\n    }\n  };\n  /**\n   * Sets the aria label of the trailing icon.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setTrailingIconAriaLabel = function (label) {\n    if (this.trailingIcon_) {\n      this.trailingIcon_.setAriaLabel(label);\n    }\n  };\n  /**\n   * Sets the text content of the trailing icon.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setTrailingIconContent = function (content) {\n    if (this.trailingIcon_) {\n      this.trailingIcon_.setContent(content);\n    }\n  };\n  /**\n   * Sets character counter values that shows characters used and the total character limit.\n   */\n\n\n  MDCTextFieldFoundation.prototype.setCharacterCounter_ = function (currentLength) {\n    if (!this.characterCounter_) {\n      return;\n    }\n\n    var maxLength = this.getNativeInput_().maxLength;\n\n    if (maxLength === -1) {\n      throw new Error('MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.');\n    }\n\n    this.characterCounter_.setCounterValue(currentLength, maxLength);\n  };\n  /**\n   * @return True if the Text Field input fails in converting the user-supplied value.\n   */\n\n\n  MDCTextFieldFoundation.prototype.isBadInput_ = function () {\n    // The badInput property is not supported in IE 11 💩.\n    return this.getNativeInput_().validity.badInput || false;\n  };\n  /**\n   * @return The result of native validity checking (ValidityState.valid).\n   */\n\n\n  MDCTextFieldFoundation.prototype.isNativeInputValid_ = function () {\n    return this.getNativeInput_().validity.valid;\n  };\n  /**\n   * Styles the component based on the validity state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.styleValidity_ = function (isValid) {\n    var INVALID = MDCTextFieldFoundation.cssClasses.INVALID;\n\n    if (isValid) {\n      this.adapter.removeClass(INVALID);\n    } else {\n      this.adapter.addClass(INVALID);\n    }\n\n    if (this.helperText_) {\n      this.helperText_.setValidity(isValid);\n    }\n  };\n  /**\n   * Styles the component based on the focused state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.styleFocused_ = function (isFocused) {\n    var FOCUSED = MDCTextFieldFoundation.cssClasses.FOCUSED;\n\n    if (isFocused) {\n      this.adapter.addClass(FOCUSED);\n    } else {\n      this.adapter.removeClass(FOCUSED);\n    }\n  };\n  /**\n   * Styles the component based on the disabled state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.styleDisabled_ = function (isDisabled) {\n    var _a = MDCTextFieldFoundation.cssClasses,\n        DISABLED = _a.DISABLED,\n        INVALID = _a.INVALID;\n\n    if (isDisabled) {\n      this.adapter.addClass(DISABLED);\n      this.adapter.removeClass(INVALID);\n    } else {\n      this.adapter.removeClass(DISABLED);\n    }\n\n    if (this.leadingIcon_) {\n      this.leadingIcon_.setDisabled(isDisabled);\n    }\n\n    if (this.trailingIcon_) {\n      this.trailingIcon_.setDisabled(isDisabled);\n    }\n  };\n  /**\n   * Styles the component based on the label floating state.\n   */\n\n\n  MDCTextFieldFoundation.prototype.styleFloating_ = function (isFloating) {\n    var LABEL_FLOATING = MDCTextFieldFoundation.cssClasses.LABEL_FLOATING;\n\n    if (isFloating) {\n      this.adapter.addClass(LABEL_FLOATING);\n    } else {\n      this.adapter.removeClass(LABEL_FLOATING);\n    }\n  };\n  /**\n   * @return The native text input element from the host environment, or an object with the same shape for unit tests.\n   */\n\n\n  MDCTextFieldFoundation.prototype.getNativeInput_ = function () {\n    // this.adapter may be undefined in foundation unit tests. This happens when testdouble is creating a mock object\n    // and invokes the shouldShake/shouldFloat getters (which in turn call getValue(), which calls this method) before\n    // init() has been called from the MDCTextField constructor. To work around that issue, we return a dummy object.\n    var nativeInput = this.adapter ? this.adapter.getNativeInput() : null;\n    return nativeInput || {\n      disabled: false,\n      maxLength: -1,\n      required: false,\n      type: 'input',\n      validity: {\n        badInput: false,\n        valid: true\n      },\n      value: ''\n    };\n  };\n\n  return MDCTextFieldFoundation;\n}(MDCFoundation);\n\nexport { MDCTextFieldFoundation }; // tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\n\nexport default MDCTextFieldFoundation;","map":{"version":3,"sources":["foundation.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAQ,aAAR,QAA4B,2BAA5B;AAIA,SAAQ,kBAAR,EAA4B,UAA5B,EAAwC,OAAxC,EAAiD,OAAjD,EAA0D,yBAA1D,QAA0F,aAA1F;AAQA,IAAM,kBAAkB,GAA2B,CAAC,WAAD,EAAc,YAAd,CAAnD;AACA,IAAM,kBAAkB,GAA2B,CAAC,OAAD,EAAU,SAAV,CAAnD;;AAEA,IAAA,sBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;AA4E1C;;;;;;AAIA,WAAA,sBAAA,CAAY,OAAZ,EAAoD,aAApD,EAA0G;AAAtD,QAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,aAAA,GAAA,EAAA;AAAsD;;AAA1G,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EAAU,sBAAsB,CAAC,cAAjC,CAAA,EAAoD,OAApD,CAAA,KAA6D,IAD/D;;AAtBQ,IAAA,KAAA,CAAA,UAAA,GAAa,KAAb;AACA,IAAA,KAAA,CAAA,kBAAA,GAAqB,KAArB;AACA,IAAA,KAAA,CAAA,QAAA,GAAW,IAAX;AACA,IAAA,KAAA,CAAA,oBAAA,GAAuB,IAAvB;AAsBN,IAAA,KAAI,CAAC,WAAL,GAAmB,aAAa,CAAC,UAAjC;AACA,IAAA,KAAI,CAAC,iBAAL,GAAyB,aAAa,CAAC,gBAAvC;AACA,IAAA,KAAI,CAAC,YAAL,GAAoB,aAAa,CAAC,WAAlC;AACA,IAAA,KAAI,CAAC,aAAL,GAAqB,aAAa,CAAC,YAAnC;;AAEA,IAAA,KAAI,CAAC,kBAAL,GAA0B,YAAA;AAAM,aAAA,KAAI,CAAJ,aAAA,EAAA;AAAoB,KAApD;;AACA,IAAA,KAAI,CAAC,iBAAL,GAAyB,YAAA;AAAM,aAAA,KAAI,CAAJ,eAAA,EAAA;AAAsB,KAArD;;AACA,IAAA,KAAI,CAAC,kBAAL,GAA0B,YAAA;AAAM,aAAA,KAAI,CAAJ,WAAA,EAAA;AAAkB,KAAlD;;AACA,IAAA,KAAI,CAAC,kBAAL,GAA0B,UAAC,GAAD,EAAI;AAAK,aAAA,KAAI,CAAC,kBAAL,CAAA,GAAA,CAAA;AAA4B,KAA/D;;AACA,IAAA,KAAI,CAAC,4BAAL,GAAoC,YAAA;AAAM,aAAA,KAAI,CAAJ,0BAAA,EAAA;AAAiC,KAA3E;;AACA,IAAA,KAAI,CAAC,iCAAL,GAAyC,UAAC,cAAD,EAAe;AAAK,aAAA,KAAI,CAAC,+BAAL,CAAA,cAAA,CAAA;AAAoD,KAAjH;;;AACD;;AA7FD,EAAA,MAAA,CAAA,cAAA,CAAW,sBAAX,EAAW,YAAX,EAAqB;SAArB,YAAA;AACE,aAAO,UAAP;AACD,KAFoB;oBAAA;;AAAA,GAArB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAW,sBAAX,EAAW,SAAX,EAAkB;SAAlB,YAAA;AACE,aAAO,OAAP;AACD,KAFiB;oBAAA;;AAAA,GAAlB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAW,sBAAX,EAAW,SAAX,EAAkB;SAAlB,YAAA;AACE,aAAO,OAAP;AACD,KAFiB;oBAAA;;AAAA,GAAlB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAY,sBAAA,CAAA,SAAZ,EAAY,oBAAZ,EAA8B;SAA9B,YAAA;AACE,UAAM,IAAI,GAAG,KAAK,eAAL,GAAuB,IAApC;AACA,aAAO,kBAAkB,CAAC,OAAnB,CAA2B,IAA3B,KAAoC,CAA3C;AACD,KAH6B;oBAAA;;AAAA,GAA9B;AAKA,EAAA,MAAA,CAAA,cAAA,CAAI,sBAAA,CAAA,SAAJ,EAAI,aAAJ,EAAe;SAAf,YAAA;AACE,aAAO,KAAK,kBAAL,IAA2B,KAAK,UAAhC,IAA8C,CAAC,CAAC,KAAK,QAAL,EAAhD,IAAmE,KAAK,WAAL,EAA1E;AACD,KAFc;oBAAA;;AAAA,GAAf;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,sBAAA,CAAA,SAAJ,EAAI,aAAJ,EAAe;SAAf,YAAA;AACE,aAAO,CAAC,KAAK,UAAN,IAAoB,CAAC,KAAK,OAAL,EAArB,IAAuC,CAAC,CAAC,KAAK,QAAL,EAAhD;AACD,KAFc;oBAAA;;AAAA,GAAf;AAOA,EAAA,MAAA,CAAA,cAAA,CAAW,sBAAX,EAAW,gBAAX,EAAyB;AAHzB;;;SAGA,YAAA;AACE;AACA,aAAO;AACL,QAAA,QAAQ,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SADpB;AAEL,QAAA,WAAW,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAFvB;AAGL,QAAA,QAAQ,EAAE,YAAA;AAAM,iBAAA,IAAA;AAAI,SAHf;AAIL,QAAA,mCAAmC,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAJ/C;AAKL,QAAA,qCAAqC,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SALjD;AAML,QAAA,+BAA+B,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAN3C;AAOL,QAAA,iCAAiC,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAP7C;AAQL,QAAA,wCAAwC,EAAE,YAAA;AAAM,iBAAA,IAAI,gBAAJ,CAAqB,YAAA;AAAM,mBAAA,SAAA;AAA3B,WAAA,CAAA;AAAqC,SARhF;AASL,QAAA,0CAA0C,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SATtD;AAUL,QAAA,cAAc,EAAE,YAAA;AAAM,iBAAA,IAAA;AAAI,SAVrB;AAWL,QAAA,SAAS,EAAE,YAAA;AAAM,iBAAA,KAAA;AAAK,SAXjB;AAYL,QAAA,kBAAkB,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAZ9B;AAaL,QAAA,oBAAoB,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAbhC;AAcL,QAAA,4BAA4B,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAdxC;AAeL,QAAA,UAAU,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAftB;AAgBL,QAAA,UAAU,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAhBtB;AAiBL,QAAA,gBAAgB,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SAjB5B;AAkBL,QAAA,QAAQ,EAAE,YAAA;AAAM,iBAAA,KAAA;AAAK,SAlBhB;AAmBL,QAAA,aAAa,EAAE,YAAA;AAAM,iBAAA,CAAA;AAAC,SAnBjB;AAoBL,QAAA,UAAU,EAAE,YAAA;AAAM,iBAAA,KAAA;AAAK,SApBlB;AAqBL,QAAA,YAAY,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS,SArBxB;AAsBL,QAAA,YAAY,EAAE,YAAA;AAAM,iBAAA,SAAA;AAAS;AAtBxB,OAAP,CAFF,CA0BE;AACD,KA3BwB;oBAAA;;AAAA,GAAzB;;AAmEA,EAAA,sBAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,QAAI,KAAK,OAAL,CAAa,QAAb,MAA2B,KAAK,eAAL,GAAuB,QAAtD,EAAgE;AAC9D,WAAK,OAAL,CAAa,gBAAb,CAA8B,IAA9B;AACD;;AAED,QAAI,KAAK,OAAL,CAAa,SAAb,EAAJ,EAA8B;AAC5B,WAAK,kBAAL;AACD,KAFD,MAEO,IAAI,KAAK,OAAL,CAAa,QAAb,MAA2B,KAAK,WAApC,EAAiD;AACtD,WAAK,YAAL,CAAkB,IAAlB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,IAAxB;AACA,WAAK,cAAL,CAAoB,IAApB;AACD;;AAED,SAAK,OAAL,CAAa,+BAAb,CAA6C,OAA7C,EAAsD,KAAK,kBAA3D;AACA,SAAK,OAAL,CAAa,+BAAb,CAA6C,MAA7C,EAAqD,KAAK,iBAA1D;AACA,SAAK,OAAL,CAAa,+BAAb,CAA6C,OAA7C,EAAsD,KAAK,kBAA3D;AACA,IAAA,kBAAkB,CAAC,OAAnB,CAA2B,UAAC,OAAD,EAAQ;AACjC,MAAA,KAAI,CAAC,OAAL,CAAa,+BAAb,CAA6C,OAA7C,EAAsD,KAAI,CAAC,kBAA3D;AACD,KAFD;AAGA,IAAA,kBAAkB,CAAC,OAAnB,CAA2B,UAAC,OAAD,EAAQ;AACjC,MAAA,KAAI,CAAC,OAAL,CAAa,mCAAb,CAAiD,OAAjD,EAA0D,KAAI,CAAC,4BAA/D;AACD,KAFD;AAGA,SAAK,mBAAL,GACI,KAAK,OAAL,CAAa,wCAAb,CAAsD,KAAK,iCAA3D,CADJ;AAEA,SAAK,oBAAL,CAA0B,KAAK,QAAL,GAAgB,MAA1C;AACD,GAzBD;;AA2BA,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,SAAK,OAAL,CAAa,iCAAb,CAA+C,OAA/C,EAAwD,KAAK,kBAA7D;AACA,SAAK,OAAL,CAAa,iCAAb,CAA+C,MAA/C,EAAuD,KAAK,iBAA5D;AACA,SAAK,OAAL,CAAa,iCAAb,CAA+C,OAA/C,EAAwD,KAAK,kBAA7D;AACA,IAAA,kBAAkB,CAAC,OAAnB,CAA2B,UAAC,OAAD,EAAQ;AACjC,MAAA,KAAI,CAAC,OAAL,CAAa,iCAAb,CAA+C,OAA/C,EAAwD,KAAI,CAAC,kBAA7D;AACD,KAFD;AAGA,IAAA,kBAAkB,CAAC,OAAnB,CAA2B,UAAC,OAAD,EAAQ;AACjC,MAAA,KAAI,CAAC,OAAL,CAAa,qCAAb,CAAmD,OAAnD,EAA4D,KAAI,CAAC,4BAAjE;AACD,KAFD;AAGA,SAAK,OAAL,CAAa,0CAAb,CAAwD,KAAK,mBAA7D;AACD,GAXD;AAaA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,YAAA;AACE,QAAM,WAAW,GAAG,KAAK,OAAL,CAAa,cAAb,EAApB;;AACA,QAAI,WAAW,IAAI,WAAW,CAAC,QAA/B,EAAyC;AACvC;AACD;;AACD,SAAK,kBAAL,GAA0B,IAA1B;AACD,GAND;AAQA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,+BAAA,GAAA,UAAgC,cAAhC,EAAwD;AAAxD,QAAA,KAAA,GAAA,IAAA;;AACE,IAAA,cAAc,CAAC,IAAf,CAAoB,UAAC,aAAD,EAAc;AAChC,UAAI,yBAAyB,CAAC,OAA1B,CAAkC,aAAlC,IAAmD,CAAC,CAAxD,EAA2D;AACzD,QAAA,KAAI,CAAC,cAAL,CAAoB,IAApB;;AACA,QAAA,KAAI,CAAC,OAAL,CAAa,gBAAb,CAA8B,KAAI,CAAC,eAAL,GAAuB,QAArD;;AACA,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD,KAPD;;AASA,QAAI,cAAc,CAAC,OAAf,CAAuB,WAAvB,IAAsC,CAAC,CAA3C,EAA8C;AAC5C,WAAK,oBAAL,CAA0B,KAAK,QAAL,GAAgB,MAA1C;AACD;AACF,GAbD;AAeA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,SAAb,EAA+B;AAC7B,QAAI,CAAC,KAAK,OAAL,CAAa,UAAb,EAAL,EAAgC;AAC9B;AACD;;AAED,QAAI,SAAJ,EAAe;AACb,UAAM,UAAU,GAAG,KAAK,OAAL,CAAa,aAAb,KAA+B,OAAO,CAAC,WAA1D;AACA,WAAK,OAAL,CAAa,YAAb,CAA0B,UAA1B;AACD,KAHD,MAGO;AACL,WAAK,OAAL,CAAa,YAAb;AACD;AACF,GAXD;AAaA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,YAAA;AACE,SAAK,UAAL,GAAkB,IAAlB;AACA,SAAK,aAAL,CAAmB,KAAK,UAAxB;AACA,SAAK,OAAL,CAAa,kBAAb;;AACA,QAAI,KAAK,OAAL,CAAa,QAAb,EAAJ,EAA6B;AAC3B,WAAK,YAAL,CAAkB,KAAK,WAAvB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACA,WAAK,cAAL,CAAoB,KAAK,WAAzB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACD;;AACD,QAAI,KAAK,WAAT,EAAsB;AACpB,WAAK,WAAL,CAAiB,kBAAjB;AACD;AACF,GAbD;AAeA;;;;;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,UAAmB,GAAnB,EAA+C;AAC7C,QAAI,KAAK,UAAL,MAAqB,KAAK,OAAL,CAAa,UAAb,EAAzB,EAAoD;AAClD;AACD;;AAED,QAAM,OAAO,GAAI,GAAkB,CAAC,OAApC;AACA,QAAM,WAAW,GAAG,OAAO,GAAG,OAAO,CAAC,CAAD,CAAV,GAAgB,GAA3C;AACA,QAAM,gBAAgB,GAAI,WAAW,CAAC,MAAZ,CAA+B,qBAA/B,EAA1B;AACA,QAAM,WAAW,GAAI,WAA0B,CAAC,OAA3B,GAAqC,gBAAgB,CAAC,IAA3E;AACA,SAAK,OAAL,CAAa,4BAAb,CAA0C,WAA1C;AACD,GAVD;AAYA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACE,SAAK,iBAAL;AACA,SAAK,oBAAL,CAA0B,KAAK,QAAL,GAAgB,MAA1C;AACD,GAHD;AAKA;;;;;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACE,QAAI,CAAC,KAAK,kBAAV,EAA8B;AAC5B,WAAK,aAAL;AACD;AACF,GAJD;AAMA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACE,SAAK,UAAL,GAAkB,KAAlB;AACA,SAAK,OAAL,CAAa,oBAAb;AACA,QAAM,OAAO,GAAG,KAAK,OAAL,EAAhB;AACA,SAAK,cAAL,CAAoB,OAApB;AACA,SAAK,aAAL,CAAmB,KAAK,UAAxB;;AACA,QAAI,KAAK,OAAL,CAAa,QAAb,EAAJ,EAA6B;AAC3B,WAAK,YAAL,CAAkB,KAAK,WAAvB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACA,WAAK,cAAL,CAAoB,KAAK,WAAzB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACD;;AACD,QAAI,CAAC,KAAK,WAAV,EAAuB;AACrB,WAAK,kBAAL,GAA0B,KAA1B;AACD;AACF,GAfD;;AAiBA,EAAA,sBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,KAA9B;AACD,GAFD;AAIA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,KAAT,EAAsB;AACpB;AACA,QAAI,KAAK,QAAL,OAAoB,KAAxB,EAA+B;AAC7B,WAAK,eAAL,GAAuB,KAAvB,GAA+B,KAA/B;AACD;;AACD,SAAK,oBAAL,CAA0B,KAAK,CAAC,MAAhC;AACA,QAAM,OAAO,GAAG,KAAK,OAAL,EAAhB;AACA,SAAK,cAAL,CAAoB,OAApB;;AACA,QAAI,KAAK,OAAL,CAAa,QAAb,EAAJ,EAA6B;AAC3B,WAAK,YAAL,CAAkB,KAAK,WAAvB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACA,WAAK,cAAL,CAAoB,KAAK,WAAzB;AACA,WAAK,OAAL,CAAa,UAAb,CAAwB,KAAK,WAA7B;AACD;AACF,GAdD;AAgBA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACE,WAAO,KAAK,oBAAL,GACD,KAAK,mBAAL,EADC,GAC4B,KAAK,QADxC;AAED,GAHD;AAKA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,OAAT,EAAyB;AACvB,SAAK,QAAL,GAAgB,OAAhB;AACA,SAAK,cAAL,CAAoB,OAApB;AAEA,QAAM,WAAW,GAAG,CAAC,OAAD,IAAY,CAAC,KAAK,UAAlB,IAAgC,CAAC,CAAC,KAAK,QAAL,EAAtD;;AACA,QAAI,KAAK,OAAL,CAAa,QAAb,EAAJ,EAA6B;AAC3B,WAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB;AACD;AACF,GARD;AAUA;;;;;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,UAAuB,mBAAvB,EAAmD;AACjD,SAAK,oBAAL,GAA4B,mBAA5B;AACD,GAFD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,QAA9B;AACD,GAFD;AAIA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,QAAZ,EAA6B;AAC3B,SAAK,eAAL,GAAuB,QAAvB,GAAkC,QAAlC;AACA,SAAK,cAAL,CAAoB,QAApB;AACD,GAHD;AAKA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,UAAqB,OAArB,EAAoC;AAClC,QAAI,KAAK,WAAT,EAAsB;AACpB,WAAK,WAAL,CAAiB,UAAjB,CAA4B,OAA5B;AACD;AACF,GAJD;AAMA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,uBAAA,GAAA,UAAwB,KAAxB,EAAqC;AACnC,QAAI,KAAK,YAAT,EAAuB;AACrB,WAAK,YAAL,CAAkB,YAAlB,CAA+B,KAA/B;AACD;AACF,GAJD;AAMA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,qBAAA,GAAA,UAAsB,OAAtB,EAAqC;AACnC,QAAI,KAAK,YAAT,EAAuB;AACrB,WAAK,YAAL,CAAkB,UAAlB,CAA6B,OAA7B;AACD;AACF,GAJD;AAMA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,wBAAA,GAAA,UAAyB,KAAzB,EAAsC;AACpC,QAAI,KAAK,aAAT,EAAwB;AACtB,WAAK,aAAL,CAAmB,YAAnB,CAAgC,KAAhC;AACD;AACF,GAJD;AAMA;;;;;AAGA,EAAA,sBAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,UAAuB,OAAvB,EAAsC;AACpC,QAAI,KAAK,aAAT,EAAwB;AACtB,WAAK,aAAL,CAAmB,UAAnB,CAA8B,OAA9B;AACD;AACF,GAJD;AAMA;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,oBAAA,GAAR,UAA6B,aAA7B,EAAkD;AAChD,QAAI,CAAC,KAAK,iBAAV,EAA6B;AAC3B;AACD;;AAED,QAAM,SAAS,GAAG,KAAK,eAAL,GAAuB,SAAzC;;AACA,QAAI,SAAS,KAAK,CAAC,CAAnB,EAAsB;AACpB,YAAM,IAAI,KAAJ,CAAU,qFAAV,CAAN;AACD;;AAED,SAAK,iBAAL,CAAuB,eAAvB,CAAuC,aAAvC,EAAsD,SAAtD;AACD,GAXO;AAaR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,WAAA,GAAR,YAAA;AACE;AACA,WAAO,KAAK,eAAL,GAAuB,QAAvB,CAAgC,QAAhC,IAA4C,KAAnD;AACD,GAHO;AAKR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,mBAAA,GAAR,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,QAAvB,CAAgC,KAAvC;AACD,GAFO;AAIR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,OAAvB,EAAuC;AAC9B,QAAA,OAAA,GAAA,sBAAA,CAAA,UAAA,CAAA,OAAA;;AACP,QAAI,OAAJ,EAAa;AACX,WAAK,OAAL,CAAa,WAAb,CAAyB,OAAzB;AACD,KAFD,MAEO;AACL,WAAK,OAAL,CAAa,QAAb,CAAsB,OAAtB;AACD;;AACD,QAAI,KAAK,WAAT,EAAsB;AACpB,WAAK,WAAL,CAAiB,WAAjB,CAA6B,OAA7B;AACD;AACF,GAVO;AAYR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,SAAtB,EAAwC;AAC/B,QAAA,OAAA,GAAA,sBAAA,CAAA,UAAA,CAAA,OAAA;;AACP,QAAI,SAAJ,EAAe;AACb,WAAK,OAAL,CAAa,QAAb,CAAsB,OAAtB;AACD,KAFD,MAEO;AACL,WAAK,OAAL,CAAa,WAAb,CAAyB,OAAzB;AACD;AACF,GAPO;AASR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,UAAvB,EAA0C;AAClC,QAAA,EAAA,GAAA,sBAAA,CAAA,UAAA;AAAA,QAAC,QAAA,GAAA,EAAA,CAAA,QAAD;AAAA,QAAW,OAAA,GAAA,EAAA,CAAA,OAAX;;AACN,QAAI,UAAJ,EAAgB;AACd,WAAK,OAAL,CAAa,QAAb,CAAsB,QAAtB;AACA,WAAK,OAAL,CAAa,WAAb,CAAyB,OAAzB;AACD,KAHD,MAGO;AACL,WAAK,OAAL,CAAa,WAAb,CAAyB,QAAzB;AACD;;AAED,QAAI,KAAK,YAAT,EAAuB;AACrB,WAAK,YAAL,CAAkB,WAAlB,CAA8B,UAA9B;AACD;;AAED,QAAI,KAAK,aAAT,EAAwB;AACtB,WAAK,aAAL,CAAmB,WAAnB,CAA+B,UAA/B;AACD;AACF,GAhBO;AAkBR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,UAAvB,EAA0C;AACjC,QAAA,cAAA,GAAA,sBAAA,CAAA,UAAA,CAAA,cAAA;;AACP,QAAI,UAAJ,EAAgB;AACd,WAAK,OAAL,CAAa,QAAb,CAAsB,cAAtB;AACD,KAFD,MAEO;AACL,WAAK,OAAL,CAAa,WAAb,CAAyB,cAAzB;AACD;AACF,GAPO;AASR;;;;;AAGQ,EAAA,sBAAA,CAAA,SAAA,CAAA,eAAA,GAAR,YAAA;AACE;AACA;AACA;AACA,QAAM,WAAW,GAAG,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,cAAb,EAAf,GAA+C,IAAnE;AACA,WAAO,WAAW,IAAI;AACpB,MAAA,QAAQ,EAAE,KADU;AAEpB,MAAA,SAAS,EAAE,CAAC,CAFQ;AAGpB,MAAA,QAAQ,EAAE,KAHU;AAIpB,MAAA,IAAI,EAAE,OAJc;AAKpB,MAAA,QAAQ,EAAE;AACR,QAAA,QAAQ,EAAE,KADF;AAER,QAAA,KAAK,EAAE;AAFC,OALU;AASpB,MAAA,KAAK,EAAE;AATa,KAAtB;AAWD,GAhBO;;AAiBV,SAAA,sBAAA;AAAC,CAzdD,CAA4C,aAA5C,CAAA;;mCA2dA;;AACA,eAAe,sBAAf","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { ALWAYS_FLOAT_TYPES, cssClasses, numbers, strings, VALIDATION_ATTR_WHITELIST } from './constants';\nvar POINTERDOWN_EVENTS = ['mousedown', 'touchstart'];\nvar INTERACTION_EVENTS = ['click', 'keydown'];\nvar MDCTextFieldFoundation = /** @class */ (function (_super) {\n    __extends(MDCTextFieldFoundation, _super);\n    /**\n     * @param adapter\n     * @param foundationMap Map from subcomponent names to their subfoundations.\n     */\n    function MDCTextFieldFoundation(adapter, foundationMap) {\n        if (foundationMap === void 0) { foundationMap = {}; }\n        var _this = _super.call(this, __assign(__assign({}, MDCTextFieldFoundation.defaultAdapter), adapter)) || this;\n        _this.isFocused_ = false;\n        _this.receivedUserInput_ = false;\n        _this.isValid_ = true;\n        _this.useNativeValidation_ = true;\n        _this.helperText_ = foundationMap.helperText;\n        _this.characterCounter_ = foundationMap.characterCounter;\n        _this.leadingIcon_ = foundationMap.leadingIcon;\n        _this.trailingIcon_ = foundationMap.trailingIcon;\n        _this.inputFocusHandler_ = function () { return _this.activateFocus(); };\n        _this.inputBlurHandler_ = function () { return _this.deactivateFocus(); };\n        _this.inputInputHandler_ = function () { return _this.handleInput(); };\n        _this.setPointerXOffset_ = function (evt) { return _this.setTransformOrigin(evt); };\n        _this.textFieldInteractionHandler_ = function () { return _this.handleTextFieldInteraction(); };\n        _this.validationAttributeChangeHandler_ = function (attributesList) { return _this.handleValidationAttributeChange(attributesList); };\n        return _this;\n    }\n    Object.defineProperty(MDCTextFieldFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldAlwaysFloat_\", {\n        get: function () {\n            var type = this.getNativeInput_().type;\n            return ALWAYS_FLOAT_TYPES.indexOf(type) >= 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldFloat\", {\n        get: function () {\n            return this.shouldAlwaysFloat_ || this.isFocused_ || !!this.getValue() || this.isBadInput_();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation.prototype, \"shouldShake\", {\n        get: function () {\n            return !this.isFocused_ && !this.isValid() && !!this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTextFieldFoundation, \"defaultAdapter\", {\n        /**\n         * See {@link MDCTextFieldAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return true; },\n                registerTextFieldInteractionHandler: function () { return undefined; },\n                deregisterTextFieldInteractionHandler: function () { return undefined; },\n                registerInputInteractionHandler: function () { return undefined; },\n                deregisterInputInteractionHandler: function () { return undefined; },\n                registerValidationAttributeChangeHandler: function () { return new MutationObserver(function () { return undefined; }); },\n                deregisterValidationAttributeChangeHandler: function () { return undefined; },\n                getNativeInput: function () { return null; },\n                isFocused: function () { return false; },\n                activateLineRipple: function () { return undefined; },\n                deactivateLineRipple: function () { return undefined; },\n                setLineRippleTransformOrigin: function () { return undefined; },\n                shakeLabel: function () { return undefined; },\n                floatLabel: function () { return undefined; },\n                setLabelRequired: function () { return undefined; },\n                hasLabel: function () { return false; },\n                getLabelWidth: function () { return 0; },\n                hasOutline: function () { return false; },\n                notchOutline: function () { return undefined; },\n                closeOutline: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCTextFieldFoundation.prototype.init = function () {\n        var _this = this;\n        if (this.adapter.hasLabel() && this.getNativeInput_().required) {\n            this.adapter.setLabelRequired(true);\n        }\n        if (this.adapter.isFocused()) {\n            this.inputFocusHandler_();\n        }\n        else if (this.adapter.hasLabel() && this.shouldFloat) {\n            this.notchOutline(true);\n            this.adapter.floatLabel(true);\n            this.styleFloating_(true);\n        }\n        this.adapter.registerInputInteractionHandler('focus', this.inputFocusHandler_);\n        this.adapter.registerInputInteractionHandler('blur', this.inputBlurHandler_);\n        this.adapter.registerInputInteractionHandler('input', this.inputInputHandler_);\n        POINTERDOWN_EVENTS.forEach(function (evtType) {\n            _this.adapter.registerInputInteractionHandler(evtType, _this.setPointerXOffset_);\n        });\n        INTERACTION_EVENTS.forEach(function (evtType) {\n            _this.adapter.registerTextFieldInteractionHandler(evtType, _this.textFieldInteractionHandler_);\n        });\n        this.validationObserver_ =\n            this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_);\n        this.setCharacterCounter_(this.getValue().length);\n    };\n    MDCTextFieldFoundation.prototype.destroy = function () {\n        var _this = this;\n        this.adapter.deregisterInputInteractionHandler('focus', this.inputFocusHandler_);\n        this.adapter.deregisterInputInteractionHandler('blur', this.inputBlurHandler_);\n        this.adapter.deregisterInputInteractionHandler('input', this.inputInputHandler_);\n        POINTERDOWN_EVENTS.forEach(function (evtType) {\n            _this.adapter.deregisterInputInteractionHandler(evtType, _this.setPointerXOffset_);\n        });\n        INTERACTION_EVENTS.forEach(function (evtType) {\n            _this.adapter.deregisterTextFieldInteractionHandler(evtType, _this.textFieldInteractionHandler_);\n        });\n        this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_);\n    };\n    /**\n     * Handles user interactions with the Text Field.\n     */\n    MDCTextFieldFoundation.prototype.handleTextFieldInteraction = function () {\n        var nativeInput = this.adapter.getNativeInput();\n        if (nativeInput && nativeInput.disabled) {\n            return;\n        }\n        this.receivedUserInput_ = true;\n    };\n    /**\n     * Handles validation attribute changes\n     */\n    MDCTextFieldFoundation.prototype.handleValidationAttributeChange = function (attributesList) {\n        var _this = this;\n        attributesList.some(function (attributeName) {\n            if (VALIDATION_ATTR_WHITELIST.indexOf(attributeName) > -1) {\n                _this.styleValidity_(true);\n                _this.adapter.setLabelRequired(_this.getNativeInput_().required);\n                return true;\n            }\n            return false;\n        });\n        if (attributesList.indexOf('maxlength') > -1) {\n            this.setCharacterCounter_(this.getValue().length);\n        }\n    };\n    /**\n     * Opens/closes the notched outline.\n     */\n    MDCTextFieldFoundation.prototype.notchOutline = function (openNotch) {\n        if (!this.adapter.hasOutline()) {\n            return;\n        }\n        if (openNotch) {\n            var labelWidth = this.adapter.getLabelWidth() * numbers.LABEL_SCALE;\n            this.adapter.notchOutline(labelWidth);\n        }\n        else {\n            this.adapter.closeOutline();\n        }\n    };\n    /**\n     * Activates the text field focus state.\n     */\n    MDCTextFieldFoundation.prototype.activateFocus = function () {\n        this.isFocused_ = true;\n        this.styleFocused_(this.isFocused_);\n        this.adapter.activateLineRipple();\n        if (this.adapter.hasLabel()) {\n            this.notchOutline(this.shouldFloat);\n            this.adapter.floatLabel(this.shouldFloat);\n            this.styleFloating_(this.shouldFloat);\n            this.adapter.shakeLabel(this.shouldShake);\n        }\n        if (this.helperText_) {\n            this.helperText_.showToScreenReader();\n        }\n    };\n    /**\n     * Sets the line ripple's transform origin, so that the line ripple activate\n     * animation will animate out from the user's click location.\n     */\n    MDCTextFieldFoundation.prototype.setTransformOrigin = function (evt) {\n        if (this.isDisabled() || this.adapter.hasOutline()) {\n            return;\n        }\n        var touches = evt.touches;\n        var targetEvent = touches ? touches[0] : evt;\n        var targetClientRect = targetEvent.target.getBoundingClientRect();\n        var normalizedX = targetEvent.clientX - targetClientRect.left;\n        this.adapter.setLineRippleTransformOrigin(normalizedX);\n    };\n    /**\n     * Handles input change of text input and text area.\n     */\n    MDCTextFieldFoundation.prototype.handleInput = function () {\n        this.autoCompleteFocus();\n        this.setCharacterCounter_(this.getValue().length);\n    };\n    /**\n     * Activates the Text Field's focus state in cases when the input value\n     * changes without user input (e.g. programmatically).\n     */\n    MDCTextFieldFoundation.prototype.autoCompleteFocus = function () {\n        if (!this.receivedUserInput_) {\n            this.activateFocus();\n        }\n    };\n    /**\n     * Deactivates the Text Field's focus state.\n     */\n    MDCTextFieldFoundation.prototype.deactivateFocus = function () {\n        this.isFocused_ = false;\n        this.adapter.deactivateLineRipple();\n        var isValid = this.isValid();\n        this.styleValidity_(isValid);\n        this.styleFocused_(this.isFocused_);\n        if (this.adapter.hasLabel()) {\n            this.notchOutline(this.shouldFloat);\n            this.adapter.floatLabel(this.shouldFloat);\n            this.styleFloating_(this.shouldFloat);\n            this.adapter.shakeLabel(this.shouldShake);\n        }\n        if (!this.shouldFloat) {\n            this.receivedUserInput_ = false;\n        }\n    };\n    MDCTextFieldFoundation.prototype.getValue = function () {\n        return this.getNativeInput_().value;\n    };\n    /**\n     * @param value The value to set on the input Element.\n     */\n    MDCTextFieldFoundation.prototype.setValue = function (value) {\n        // Prevent Safari from moving the caret to the end of the input when the value has not changed.\n        if (this.getValue() !== value) {\n            this.getNativeInput_().value = value;\n        }\n        this.setCharacterCounter_(value.length);\n        var isValid = this.isValid();\n        this.styleValidity_(isValid);\n        if (this.adapter.hasLabel()) {\n            this.notchOutline(this.shouldFloat);\n            this.adapter.floatLabel(this.shouldFloat);\n            this.styleFloating_(this.shouldFloat);\n            this.adapter.shakeLabel(this.shouldShake);\n        }\n    };\n    /**\n     * @return The custom validity state, if set; otherwise, the result of a native validity check.\n     */\n    MDCTextFieldFoundation.prototype.isValid = function () {\n        return this.useNativeValidation_\n            ? this.isNativeInputValid_() : this.isValid_;\n    };\n    /**\n     * @param isValid Sets the custom validity state of the Text Field.\n     */\n    MDCTextFieldFoundation.prototype.setValid = function (isValid) {\n        this.isValid_ = isValid;\n        this.styleValidity_(isValid);\n        var shouldShake = !isValid && !this.isFocused_ && !!this.getValue();\n        if (this.adapter.hasLabel()) {\n            this.adapter.shakeLabel(shouldShake);\n        }\n    };\n    /**\n     * Enables or disables the use of native validation. Use this for custom validation.\n     * @param useNativeValidation Set this to false to ignore native input validation.\n     */\n    MDCTextFieldFoundation.prototype.setUseNativeValidation = function (useNativeValidation) {\n        this.useNativeValidation_ = useNativeValidation;\n    };\n    MDCTextFieldFoundation.prototype.isDisabled = function () {\n        return this.getNativeInput_().disabled;\n    };\n    /**\n     * @param disabled Sets the text-field disabled or enabled.\n     */\n    MDCTextFieldFoundation.prototype.setDisabled = function (disabled) {\n        this.getNativeInput_().disabled = disabled;\n        this.styleDisabled_(disabled);\n    };\n    /**\n     * @param content Sets the content of the helper text.\n     */\n    MDCTextFieldFoundation.prototype.setHelperTextContent = function (content) {\n        if (this.helperText_) {\n            this.helperText_.setContent(content);\n        }\n    };\n    /**\n     * Sets the aria label of the leading icon.\n     */\n    MDCTextFieldFoundation.prototype.setLeadingIconAriaLabel = function (label) {\n        if (this.leadingIcon_) {\n            this.leadingIcon_.setAriaLabel(label);\n        }\n    };\n    /**\n     * Sets the text content of the leading icon.\n     */\n    MDCTextFieldFoundation.prototype.setLeadingIconContent = function (content) {\n        if (this.leadingIcon_) {\n            this.leadingIcon_.setContent(content);\n        }\n    };\n    /**\n     * Sets the aria label of the trailing icon.\n     */\n    MDCTextFieldFoundation.prototype.setTrailingIconAriaLabel = function (label) {\n        if (this.trailingIcon_) {\n            this.trailingIcon_.setAriaLabel(label);\n        }\n    };\n    /**\n     * Sets the text content of the trailing icon.\n     */\n    MDCTextFieldFoundation.prototype.setTrailingIconContent = function (content) {\n        if (this.trailingIcon_) {\n            this.trailingIcon_.setContent(content);\n        }\n    };\n    /**\n     * Sets character counter values that shows characters used and the total character limit.\n     */\n    MDCTextFieldFoundation.prototype.setCharacterCounter_ = function (currentLength) {\n        if (!this.characterCounter_) {\n            return;\n        }\n        var maxLength = this.getNativeInput_().maxLength;\n        if (maxLength === -1) {\n            throw new Error('MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.');\n        }\n        this.characterCounter_.setCounterValue(currentLength, maxLength);\n    };\n    /**\n     * @return True if the Text Field input fails in converting the user-supplied value.\n     */\n    MDCTextFieldFoundation.prototype.isBadInput_ = function () {\n        // The badInput property is not supported in IE 11 💩.\n        return this.getNativeInput_().validity.badInput || false;\n    };\n    /**\n     * @return The result of native validity checking (ValidityState.valid).\n     */\n    MDCTextFieldFoundation.prototype.isNativeInputValid_ = function () {\n        return this.getNativeInput_().validity.valid;\n    };\n    /**\n     * Styles the component based on the validity state.\n     */\n    MDCTextFieldFoundation.prototype.styleValidity_ = function (isValid) {\n        var INVALID = MDCTextFieldFoundation.cssClasses.INVALID;\n        if (isValid) {\n            this.adapter.removeClass(INVALID);\n        }\n        else {\n            this.adapter.addClass(INVALID);\n        }\n        if (this.helperText_) {\n            this.helperText_.setValidity(isValid);\n        }\n    };\n    /**\n     * Styles the component based on the focused state.\n     */\n    MDCTextFieldFoundation.prototype.styleFocused_ = function (isFocused) {\n        var FOCUSED = MDCTextFieldFoundation.cssClasses.FOCUSED;\n        if (isFocused) {\n            this.adapter.addClass(FOCUSED);\n        }\n        else {\n            this.adapter.removeClass(FOCUSED);\n        }\n    };\n    /**\n     * Styles the component based on the disabled state.\n     */\n    MDCTextFieldFoundation.prototype.styleDisabled_ = function (isDisabled) {\n        var _a = MDCTextFieldFoundation.cssClasses, DISABLED = _a.DISABLED, INVALID = _a.INVALID;\n        if (isDisabled) {\n            this.adapter.addClass(DISABLED);\n            this.adapter.removeClass(INVALID);\n        }\n        else {\n            this.adapter.removeClass(DISABLED);\n        }\n        if (this.leadingIcon_) {\n            this.leadingIcon_.setDisabled(isDisabled);\n        }\n        if (this.trailingIcon_) {\n            this.trailingIcon_.setDisabled(isDisabled);\n        }\n    };\n    /**\n     * Styles the component based on the label floating state.\n     */\n    MDCTextFieldFoundation.prototype.styleFloating_ = function (isFloating) {\n        var LABEL_FLOATING = MDCTextFieldFoundation.cssClasses.LABEL_FLOATING;\n        if (isFloating) {\n            this.adapter.addClass(LABEL_FLOATING);\n        }\n        else {\n            this.adapter.removeClass(LABEL_FLOATING);\n        }\n    };\n    /**\n     * @return The native text input element from the host environment, or an object with the same shape for unit tests.\n     */\n    MDCTextFieldFoundation.prototype.getNativeInput_ = function () {\n        // this.adapter may be undefined in foundation unit tests. This happens when testdouble is creating a mock object\n        // and invokes the shouldShake/shouldFloat getters (which in turn call getValue(), which calls this method) before\n        // init() has been called from the MDCTextField constructor. To work around that issue, we return a dummy object.\n        var nativeInput = this.adapter ? this.adapter.getNativeInput() : null;\n        return nativeInput || {\n            disabled: false,\n            maxLength: -1,\n            required: false,\n            type: 'input',\n            validity: {\n                badInput: false,\n                valid: true,\n            },\n            value: '',\n        };\n    };\n    return MDCTextFieldFoundation;\n}(MDCFoundation));\nexport { MDCTextFieldFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCTextFieldFoundation;\n//# sourceMappingURL=foundation.js.map"]},"metadata":{},"sourceType":"module"}